# ZSM Client SDK for Browser UMFA Applications
# Error Messages and Codes

## Client-Specific Error Messages (Errors beginning with `[UMFAClient]`)
The following are the top-level error messages most likely to be encountered when setting up or using the ZSM Client SDK in a browser environment. They are organized by the API method that generates them, and include a description of the error, as well as possible causes.

| API Method | Error Message | Description | Possible Causes Include... |
| ---------- | ------------- | ----------- | -------------------------- |
| `authenticate`       | `A <userIdentifier> String is required!`  | A bad value (or no value at all) was provided for the required `userIdentifier` parameter to the `UMFAClient.authenticate()` method. | 1. The `userIdentifier` parameter was not passed in to the method.<br>2. The parameter passed in was of the wrong type (e.g., `Undefined`, `Number`, `null`), when a `String` was expected.<br>3. The string passed in was blank (`""`).<br><span class="rcmd">**Recommendation:** Consult the [API Reference](api.md#authenticate) for the correct parameter format and usage.</span> |
| `authenticate`       | `An error occurred during authentication.` | This is a generic error that catches errors that were thrown during the `authenticate()` method's execution, but were otherwise uncaught. | <span class="rcmd">**Recommendation:** Examine the error stack accompanying it for additional details.</span> |
| | | | |
| `checkEnrollment`    | `A <userIdentifier> String is required!`  | A bad value (or no value at all) was provided for the required `userIdentifier` parameter to the `UMFAClient.checkEnrollment()` method. | 1. The `userIdentifier` parameter was not passed in to the method.<br>2. The parameter passed in was of the wrong type (e.g., `Undefined`, `Number`, `null`), when a `String` was expected.<br>3. The string passed in was blank (`""`).<br><span class="rcmd">**Recommendation:** Consult the [API Reference](api.md#check-enrollment) for the correct parameter format and usage.</span> |
| `checkEnrollment`    | `An error occurred while attempting to check enrollment.` | This is a generic error that catches errors that were thrown during the `checkEnrollment()` method's execution, but were otherwise uncaught. | <span class="rcmd">**Recommendation:** Examine the error stack accompanying it for additional details.</span> |
| | | | |
| `enroll`             | `A <userIdentifier> String is required!`  | A bad value (or no value at all) was provided for the required `userIdentifier` parameter to the `UMFAClient.enroll()` method. | 1. The `userIdentifier` parameter was not passed in to the method.<br>2. The parameter passed in was of the wrong type (e.g., `Undefined`, `Number`, `null`), when a `String` was expected.<br>3. The string passed in was blank (`""`).<br><span class="rcmd">**Recommendation:** Consult the [API Reference](api.md#enroll) for the correct parameter format and usage.</span> |
| `enroll`             | `An error occurred during enrollment.` | This is a generic error that catches errors that were thrown during the `enroll()` method's execution, but were otherwise uncaught. | <span class="rcmd">**Recommendation:** Examine the error stack accompanying it for additional details.</span> |
| `enroll`             | `Unable to acquire authentication token for <userIdentifier>!` | The ZSM SDK was unable to create a valid authentication token for the specified user identifier. | 1. The user identifier may be invalid or not properly formatted.<br>2. There may be network issues preventing communication with the authentication server.<br>3. The authentication server may be down or unreachable.<br><span class="rcmd">**Recommendation:** Check the user identifier format and verify your network connection/connectivity.</span> |
| `enroll`             | `Unable to associate <userIdentifier>'s identity with device profile.` | The ZSM SDK was unable to link the user's `<userIdentifier>` with their ZSM Credential ID. | 1. The user identifier may not be enrolled or recognized by the system.<br>2. There may be issues with the device browser's IndexedDB (corrupted, missing, or damaged).<br>3. The device's onboard data storage may have been partially or incompletely reset. <br><span class="rcmd">**Recommendation:** Clear the browser's site data and try again.</span> |
| | | | |
| `unenroll`           | `An error occurred during unenrollment.`| This is a generic error that catches errors that were thrown during the `unenroll()` method's execution, but were otherwise uncaught. | <span class="rcmd">**Recommendation:** Examine the error stack accompanying it for additional details.</span> |

## Additional Error Messages
The following error messages may also be encountered INSIDE the error stack (non-top-level) when using the ZSM Client SDK in a browser environment. 

In most cases, these errors represent internal issues, and almost always signify a problem with the implementation or configuration of the SDK. They are included here for reference, and to provide guidance on what to look for when debugging.

| Error Beginning With...             | Description | Possible Causes Include... |
| --- | --- | --- |
| `[IdentityIndexing]` ...            | Errors of this type typically indicate either issues connecting to the browser's IndexedDB database or finding/parsing user identifiers.|1. Inconsistent `<userIdentifier>` input. Verify the format and consistency of the `<userIdentifier>` value being used. Ensure they are correctly formatted and match the expected data type of String.<br>2. Damage or corruption of the IndexedDB database. In such cases, clearing the browser's site data (which will delete the IndexedDB database) may resolve the issue.<br>3. IndexedDB unsupported or not available. Check the browser's IndexedDB permissions and ensure that the database is accessible. <br>**Note:** platforms like Flutter, iOS, AndroidOS, and React Native do not support IndexedDB, and you will need to download the ZSM SDK specific to those platforms.<br><span class="rcmd">**Recommendation:** Clear the browser's site data and try again.</span> |
| `[RelyingParty]` ...                | Errors of this type typically indicate issues with the SDK's configuration, communication issues, and/or accessing the Relying Party Server. | 1. Ensure your [`zsm_app_config.json` configuration file](quick-start.md#setup-configuration-file) is present and correctly configured.<br>2. Ensure that the Relying Party server is online and reachable. The `<host_url>` provided to you (located within your [`zsm_app_config.json`](quick-start.md#setup-configuration-file)) should point to the correct server endpoint. You can perform a health-check on the server by visiting `<host_url>/api/health`. If its `status` reads anything other than `OK`, check your network connection, wait a moment, and try again. If the issue persists, [contact Ideem Support](https://support.useideem.com).<br>3. Check for any network issues that may be preventing the active device from communicating with the relying party.<br><span class="rcmd">**Recommendation:** Verify the settings inside your [`zsm_app_config.json` configuration file](quick-start.md#setup-configuration-file) then verify your network connection/connectivity.</span> |
| `[Utils]` ...                       | Errors of this type typically indicate issues with internal ZSM utility functions or methods. | These messages appear exclusively as a result of an error occurring somewhere else within the error stack, and are almost always a false positive for purposes of your own debugging.<br><span class="rcmd">**Recommendation:** Examine the error stack accompanying it for additional details, and verify your input to the topmost error therein.</span> |
| `[VanillaJSLoader]` ...             | Errors of this type typically indicate issues how you've included the optional [`VanillaJSLoader` `importmap` polyfill shim](quick-start.md#without-a-bundler), used with legacy browsers and older frameworks. | 1. Ensure that you do, in fact, need to include this shim _at all_ (non-vanillaJS files/frameworks - React, Angular, VueJS, NextJS, etc. - contemporary browsers - those newer than ~2023 - and platforms that leverage any but the very oldest versions of a bundler - Webpack, Vite, Rollup, Parcel, etc. - should not need to include this file).<br>2. Ensure you are using the correct path to the shim (`<node_modules>/@ideem/zsm-client-sdk/shims/VanillaJSLoader.js`).<br>3. Ensure the path to your `node_modules` folder is identifiable by or being passed in to the shim.<br><span class="rcmd">**Recommendation:** Verify the path to your `node_modules` folder and consult the documentation related to the use of the [VanillaJSLoader shim](quick-start.md#without-a-bundler).</span> |
| `[WebAuthnClient]` ...<br>&<br>`[WebAuthnClient - mpc_round]` ...              | Errors of this type typically indicate issues related to network connectivity, the SDK's configuration, and/or parsing previously-saved credentials produced by the SDK. | 1. Ensure your [`zsm_app_config.json` configuration file](quick-start.md#setup-configuration-file) is present and correctly configured.<br>2. Check for any network issues that may be preventing the active device from communicating with the relying party.<br>3. Ensure any credential inputs being provided to the `UMFAClient`'s methods are identical to those you received FROM the SDK.<br>4. Ensure your SDK installation is present and uncorrupted.<br><span class="rcmd">**Recommendation:** Verify the settings inside your [`zsm_app_config.json` configuration file](quick-start.md#setup-configuration-file) then verify your network connection/connectivity. Finally, re-install the SDK via the instructions provided in the [Installation Guide](installation.md).</span> |
| `[ZSM EventCoordinator]` ...        | Errors of this type typically indicate issues related to race conditions occurring as a result of attempting to call methods on the `UMFAClient` before it is fully loaded/initialized. | 1. Ensure that the `UMFAClient` is fully loaded and initialized before calling any methods on it.<br>2. If you are referencing the client via lazy-loading/JIT (just-in-time) reference, you may need to avail yourself of one of the various asynchronous loading strategies described in the [Quick-Start guide](quick-start.md#asynchronous-usage).<br><span class="rcmd">**Recommendation:** Implement proper loading and initialization checks before interacting with the `UMFAClient`, or utilize one of the async approaches described inside the [Quick-Start guide](quick-start.md#3-6-asynchronous-usage)</span> |
| `[ZSM GlobalScoping]` ...           | Errors of this type typically indicate internal issues with the ZSM Client's ability to ascertain the global scope (as occurs in mobile-emulation frameworks like React Native, or when using web-workers or service workers). | 1. Ensure your SDK installation is present and not corrupted.<br>2. Platforms like Flutter, iOS, AndroidOS, and React Native do not support global scoping; you will need to download the ZSM SDK specific to those platforms.<br><span class="rcmd">**Recommendation:** Verify you are attempting to run the SDK from a BROWSER (non-Node, non-mobile) environment, and/or re-install the SDK via the instructions provided in the [Installation Guide](installation.md).</span> |
| `[zsmPluginManager]` ...            | Errors of this type typically indicate issues with the plugin manager, such as problems registering or freezing plugins. | 1. Ensure that all plugins are correctly installed _before_ initializing the `UMFAClient`.<br>2. Ensure that all plug-ins you are attempting to leverage are `import`-ed prior to initializing the `UMFAClient`.<br>3. Ensure that, if you are leveraging the `UMFAClient` inside a VanillaJS application, you have included the `VanillaJSLoader` shim or provided an `importmap`, and that your selected method is available within the active scope.<br><span class="rcmd">**Recommendation:** Consult the documentation related to [Installation](installation.md), [Importing the Packages](quick-start.md#importing-the-packages) and, if appropriate, the use of the [VanillaJSLoader shim](quick-start.md#without-a-bundler).</span> |

## Additional Support

If you continue to experience issues after reviewing the error messages and recommendations provided above (or you believe that the issue is not related to the provided suggestions), don't hesitate to take advantage of the following options for additional support:

1. **Consult the Documentation**: Review the [ZSM Client SDK documentation](https://docs.useideem.com) for detailed information on setup, configuration, and troubleshooting.

2. **Open a Support Ticket**: If the problem persists, reach out to [Ideem Support](https://support.useideem.com) for assistance. Provide them with detailed information about the issue, including error messages, steps to reproduce, and any relevant code snippets.

3. Contact your Ideem representative for personalized assistance.
